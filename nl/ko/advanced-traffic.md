---

copyright:
  years: 2017, 2018
lastupdated: "2018-11-07"

---

{:shortdesc: .shortdesc}
{:new_window: target="_blank"}
{:codeblock: .codeblock}
{:pre: .pre}
{:screen: .screen}
{:tip: .tip}
{:download: .download}
{:important: .important}
{:note: .note}

# IBM Cloud Load Balancer로 고급 트래픽 관리
{: #advanced-traffic-management-with-ibm-cloud-load-balancer}

이 절에서는 로드 밸런서 서비스를 통해 사용 가능한 여러 고급 트래픽 관리 기능에 대해 설명합니다.

## 최대 연결

제공된 프론트 엔드 가상 포트에 대한 최대 동시 연결 수를 제한하려면 ‘최대 연결’구성을 사용하십시오. 기본적으로 제한이 없도록 지정됩니다. 제공된 프론트 엔드 가상 포트 또는 시스템 전체의 모든 프론트 엔드 가상 포트에 대해 가능한 최대 동시 연결 수는 15000입니다.  

## 세션 지속성

로드 밸런서는 연결의 `source IP`를 기반으로 제공된 VIP 포트에 대한 세션 지속성을 지원합니다. 예를 들어, 세션 지속성이 포트 80(HTTP)에 사용 가능한 경우 동일한 클라이언트(동일한 소스 IP)의 후속 HTTP 연결 시도는 동일한 백엔드 서버에 지속됩니다. 이 기능은 지원되는 세 개의 모든 프로토콜(HTTP, HTTPS 및 TCP)에 대해 사용 가능합니다.

로드 밸런서는 최대 10,000개의 클라이언트 지속성 항목을 지원합니다. 이 항목의 만기 시간은 10분입니다. 10분 후 동일한 클라이언트에서 수신된 추가 요청은 다른 백엔드 서버로 전달될 수 있습니다. 세션 지속성 항목이 만료되지 않았으나 백엔드 포트의 상태가 양호하지 않은 경우 후속 클라이언트 연결을 전달하는 데 새 서버가 선택됩니다.  

## HTTP 유지
로드 밸런서가 클라이언트 및 백엔드 서버 모두에 사용 가능한 경우 로드 밸런서는 `HTTP keep alive`를 지원합니다. 로드 밸런서는 연결 효율성을 증가시키고 대기 시간을 줄이기 위해 서버 측 HTTP 연결의 재사용을 시도합니다.

## 연결 제한시간
로드 밸런서에 사용되는 제한시간 값은 다음과 같습니다. 현재 이 값을 사용자 정의할 수 없습니다.

|이름 |설명 |제한시간 |                                                                                              
| ------------------------------------------ | --------------------------------------------------- | ------------------- |
|서버 측 연결 시도    |로드 밸런서가 백엔드 서버를 통해 TCP를 연결하는 데 사용할 수 있는 최대 시간입니다. 연결 시도가 실패하면 로드 밸런서는 사용자가 구성한 로드 밸런싱 메소드에 따라 다음으로 사용 가능한 서버에 연결을 시도합니다. |5초   |
|클라이언트 측 유휴 연결  |클라이언트가 적절하게 연결을 끊는 데 실패한 경우 로드 밸런서가 클라이언트 측 연결을 끊은 후의 최대 유휴 시간입니다.|50초  |
|서버 측 유휴 연결 |로드 밸런서가 서버 측 연결을 끊은 후의 최대 유휴 시간(TCP의 백엔드 프로토콜 구성 사용)입니다. 로드 밸런서가 유휴 제한시간 내에 HTTP 요청에 대한 응답을 수신하는 데 실패한 경우 HTTP의 백엔드 프로토콜 구성을 사용하여 일반 클라이언트에 오류 메시지를 리턴합니다.                                |50초 |
{: caption="표 1. 로드 밸런서 제한시간 값" caption-side="top"} 

## 일반 클라이언트 IP 주소 유지 

로드 밸런서가 클라이언트에서 수신 트래픽을 종료하는 되돌리기 프록시로 작동합니다. 자체 IP 주소를 사용하여 백엔드 서버 인스턴스에 대한 개별 연결을 설정합니다. 백엔드 서버(프론트 엔드 HTTP 또는 HTTPS 연결에 대한)를 사용하는 HTTP 연결의 경우 로드 밸런서는 `X-Forwarded-For HTTP` 헤더 내에 기존의 클라이언트 IP 주소를 포함하여 이를 유지합니다. TCP 연결의 경우 기존의 클라이언트 IP 정보가 유지되지 않습니다.
