---

copyright:
  years: 2017, 2018
lastupdated: "2018-11-07"

keywords: basics, load balancing

subcollection: loadbalancer-service

---

{:shortdesc: .shortdesc}
{:new_window: target="_blank"}
{:codeblock: .codeblock}
{:pre: .pre}
{:screen: .screen}
{:tip: .tip}
{:download: .download}
{:important: .important}
{:note: .note}

# 執行 {{site.data.keyword.loadbalancer_full}} 基本功能
{: #performing-ibm-cloud-load-balancer-basics}

{{site.data.keyword.loadbalancer_full}} 服務會將資料流量分散到位在相同資料中心本端的多個伺服器實例（裸機及虛擬伺服器）。

## 公用負載平衡器
{: #public-load-balancer}

會將可公開存取的完整網域名稱指派給 Load Balancer 服務實例。您必須使用此網域名稱來存取受負載平衡器服務管理的應用程式。這個網域名稱可能已登錄一個以上的公用 IP 位址。公用 IP 位址與公用 IP 位址數目可能會根據一般使用者可見的維護及調整活動隨時間而變化。管理應用程式的後端運算實例必須位在 IBM Cloud 專用網路上。

除非後端伺服器需要直接公用連線，否則建議最好將它們佈建為「僅限專用」。此作法有助於達到更好的安全，並保留公用 IP 位址。仍然可以透過使用負載平衡器的公用網路來存取這些後端伺服器所管理的應用程式。
{: note}  

在建立負載平衡器服務實例時，您可以選擇透過 IBM 系統儲存區（預設值）或您帳戶下的公用 VLAN 來配置負載平衡器公用 IP 位址。

## 內部負載平衡器
{: #internal-load-balancer}

內部負載平衡器只能在 IBM Cloud 專用網路內存取。

正如同公用負載平衡器，內部負載平衡器服務實例也會獲指派完整網域名稱。不過，此網域名稱是搭配一個以上的專用 IP 位址登錄的。

與公用負載平衡器類似，專用 IP 位址與其 IP 位址數目可能會根據一般使用者可見的維護及調整活動隨時間而變化。

管理應用程式的後端運算實例也必須位在 IBM Cloud 專用網路上。
{: note}

## 前端及後端應用程式埠/通訊協定
{: #front-end-and-back-end-application-ports-protocols}

您可以定義最多十個前端應用程式埠（通訊協定），並將它們對映至後端應用程式伺服器上的個別埠（通訊協定）。會將指派給負載平衡器服務實例的完整網域名稱以及前端應用程式埠向外部公開。送入的使用者要求是透過這些埠接收的。

另一方面，後端埠僅在內部已知。這些後端埠不一定與前端埠相同。例如，負載平衡器可能配置成透過前端埠 80 接收送入的 web/HTTP 資料流量，而後端伺服器會接聽自訂埠 81。

支援的前端埠/通訊協定是 HTTP、HTTPS 及 TCP。支援的後端埠/通訊協定也是 HTTP、HTTPS 及 TCP。送入的 HTTPS 資料流量必須終止於負載平衡器，以容許與後端伺服器進行純文字 HTTP 通訊。如果後端通訊協定為 HTTPS，則會加密負載平衡器與後端伺服器之間的資料流量。

### 考量
{: #considerations}

* 在起始配置期間，您最多只能定義兩個前端埠。建立負載平衡器之後，即可編輯埠配置來定義其他埠，且最多可有十個埠。
* 這十個前端埠全部都必須對映至同一組後端伺服器實例。
* 受負載平衡器保護的伺服器實例數目上限為 50。
* 56500 到 56520 的埠範圍是保留用於進行管理，不能用作前端虛擬埠。
* TCP 埠 56501 是用於管理。如果您選擇透過公用 VLAN 來配置負載平衡器公用 IP 位址，請確定這個管理埠及應用程式埠的資料流量並未遭到公用 VLAN 上可能已部署的任何防火牆封鎖。如果您選擇 IBM 系統儲存區選項來配置負載平衡器公用 IP 位址，則不需要此項目。

## 負載平衡方法
{: #load-balancing-methods}

下列三種負載平衡方法可用於將資料流量分散到後端應用程式伺服器：

* **循環式：**「循環式」是預設負載平衡方法。使用此方法，負載平衡器會以循環式形式將送入的用戶端連線轉遞至後端伺服器。因此，所有後端伺服器都會接收到約略相等數目的用戶端連線。

* **加權循環式：**使用此方法，負載平衡器會根據指派給這些伺服器的權重，按比例將送入的用戶端連線轉遞至後端伺服器。每一部伺服器都會獲指派預設權重 50，您可以將此值自訂為 0 到 100 之間的任何值。

	例如，如果有三部應用程式伺服器 A、B 及 C，而且分別將其權重自訂成 60、60 及 30，則伺服器 A 及 B 會收到相等數目的連線，而伺服器 C 收到的連線數目會是該連線數目的一半。


	將伺服器權重重設為 '0'，表示不會將任何新的連線轉遞給該伺服器，但只要伺服器作用中，任何現有資料流量都會持續流動。使用權重 '0' 有助於溫和地結束伺服器，並將它移除而不進行服務輪替。
	{: note}

	只有「加權循環式」方法才能使用伺服器權重值。「循環式」及「最少連線」負載平衡方法則會忽略它們。
	{: note}

* **最少連線：**使用此方法，在給定時間負責處理最少連線數目的伺服器實例會收到下一個用戶端連線。

## 水平調整
{: #horizontal-scaling}

負載平衡器會根據負載自動調整其容量。發生這種情況時，您可能會看到與負載平衡器的 DNS 名稱相關聯的 IP 位址數目出現變更。
